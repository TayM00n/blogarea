import React, {useEffect} from "react";
import {getItemFromLocalStore, setItemToLocalStore, setValueToStore} from "../../index";
import Menu from "./menu";
import {Link} from "react-router-dom";

const AuthMenu = ({currentPage, menuState}) => {

  useEffect(() => {
    menuState !== getItemFromLocalStore("stateMenu") && setValueToStore({
      type: "SET_MENU_STATE_REQUEST",
      menuState: getItemFromLocalStore("stateMenu")
    })
  }, [menuState])


  const handleSignOut = () => {
    setItemToLocalStore("user_jwt", "")
    setValueToStore({type: "SET_JWT_REQUEST", userId: getItemFromLocalStore("user_jwt")})
    setValueToStore({type: "SET_IS_LOGIN_REQUEST", isLogin: false})
  }

  const handleStateMenu = (show) => {
    setItemToLocalStore("stateMenu", show)
    setValueToStore({type: "SET_MENU_STATE_REQUEST", menuState: show})
  }

  const IconProfile = ({className}) => {
    return (
      <svg className={className} width="48" height="48" viewBox="0 0 50 50" fill="none"
           xmlns="http://www.w3.org/2000/svg">
        <g clipPath="url(#clip0)">
          <path
            d="M25.5423 24.0852C28.8511 24.0852 31.7164 22.8985 34.0574 20.557C36.3985 18.2159 37.5853 15.3515 37.5853 12.0422C37.5853 8.73413 36.3985 5.8693 34.0571 3.52745C31.7156 1.18675 28.8508 0 25.5423 0C22.233 0 19.3686 1.18675 17.0275 3.52783C14.6864 5.86891 13.4993 8.73375 13.4993 12.0422C13.4993 15.3515 14.6864 18.2163 17.0279 20.5574C19.3693 22.8981 22.2342 24.0852 25.5423 24.0852Z"
            fill="white"/>
          <path
            d="M46.615 38.4475C46.5474 37.4732 46.4109 36.4105 46.2098 35.2882C46.0069 34.1575 45.7456 33.0886 45.4328 32.1117C45.1097 31.1019 44.6702 30.1048 44.127 29.1492C43.5632 28.1574 42.901 27.2937 42.1579 26.5831C41.3808 25.8396 40.4295 25.2418 39.3293 24.8058C38.233 24.3721 37.018 24.1524 35.7183 24.1524C35.2079 24.1524 34.7143 24.3618 33.761 24.9824C33.1743 25.365 32.4881 25.8075 31.7221 26.297C31.0671 26.7143 30.1798 27.1053 29.0838 27.4593C28.0146 27.8053 26.9289 27.9808 25.8574 27.9808C24.7858 27.9808 23.7005 27.8053 22.6301 27.4593C21.5353 27.1057 20.648 26.7147 19.9938 26.2974C19.2351 25.8125 18.5484 25.37 17.953 24.9821C17.0008 24.3614 16.5068 24.152 15.9964 24.152C14.6964 24.152 13.4818 24.3721 12.3858 24.8062C11.2864 25.2415 10.3347 25.8392 9.55685 26.5835C8.81413 27.2945 8.15152 28.1578 7.58848 29.1492C7.04565 30.1048 6.60619 31.1016 6.28271 32.1121C5.97029 33.089 5.70898 34.1575 5.50604 35.2882C5.30501 36.4089 5.16844 37.4721 5.10092 38.4486C5.03455 39.4054 5.00098 40.3983 5.00098 41.4012C5.00098 44.0112 5.83067 46.1242 7.46679 47.6825C9.08269 49.2202 11.2208 50.0003 13.8209 50.0003H37.8961C40.4962 50.0003 42.6336 49.2205 44.2499 47.6825C45.8864 46.1253 46.7161 44.012 46.7161 41.4008C46.7157 40.3934 46.6817 39.3996 46.615 38.4475Z"
            fill="white"/>
        </g>
        <defs>
          <clipPath id="clip0">
            <rect width="50" height="50" fill="white"/>
          </clipPath>
        </defs>
      </svg>
    )
  }

  const IconSettings = ({className}) => {
    return (
      <svg className={className} width="50" height="50" viewBox="0 0 50 50" fill="none"
           xmlns="http://www.w3.org/2000/svg">
        <path
          d="M26.5689 50H23.431C20.893 50 18.828 47.9352 18.828 45.3972V44.3355C17.749 43.9908 16.7007 43.5557 15.6936 43.0345L14.9412 43.7868C13.119 45.6112 10.2002 45.5577 8.43096 43.7861L6.21309 41.5684C4.44072 39.798 4.38975 36.8801 6.21367 35.0581L6.96543 34.3063C6.44424 33.2992 6.00918 32.2511 5.66436 31.1719H4.60283C2.06494 31.1719 0 29.107 0 26.569V23.431C0 20.893 2.06494 18.8281 4.60293 18.8281H5.66445C6.00928 17.749 6.44434 16.7008 6.96553 15.6937L6.21318 14.9414C4.39033 13.1205 4.44063 10.2023 6.21377 8.43115L8.43184 6.21318C10.2052 4.4374 13.1233 4.39307 14.942 6.21377L15.6937 6.96543C16.7008 6.44434 17.7491 6.00918 18.8281 5.66436V4.60283C18.8281 2.06484 20.893 0 23.4311 0H26.569C29.107 0 31.1719 2.06484 31.1719 4.60283V5.66445C32.2509 6.00918 33.2992 6.44434 34.3063 6.96553L35.0587 6.21318C36.8809 4.38877 39.7997 4.44229 41.5689 6.21387L43.7868 8.43164C45.5592 10.2021 45.6102 13.1199 43.7862 14.9419L43.0345 15.6937C43.5557 16.7008 43.9907 17.7489 44.3355 18.8281H45.3971C47.9351 18.8281 50 20.893 50 23.431V26.569C50 29.107 47.9351 31.1719 45.3971 31.1719H44.3355C43.9907 32.251 43.5557 33.2992 43.0345 34.3063L43.7868 35.0587C45.6097 36.8796 45.5594 39.7978 43.7862 41.5689L41.5682 43.7869C39.7948 45.5627 36.8767 45.607 35.058 43.7863L34.3063 43.0347C33.2992 43.5558 32.2509 43.9909 31.1719 44.3357V45.3974C31.1719 47.9352 29.107 50 26.5689 50ZM16.1833 39.958C17.5824 40.7854 19.0883 41.4105 20.659 41.8159C21.3059 41.9828 21.7578 42.5662 21.7578 43.2343V45.3972C21.7578 46.3197 22.5085 47.0703 23.4311 47.0703H26.569C27.4916 47.0703 28.2423 46.3197 28.2423 45.3972V43.2343C28.2423 42.5662 28.6942 41.9828 29.3411 41.8159C30.9118 41.4105 32.4177 40.7854 33.8168 39.958C34.3925 39.6176 35.1254 39.7102 35.5983 40.1831L37.1304 41.7152C37.7909 42.3766 38.8517 42.3612 39.496 41.7159L41.7154 39.4966C42.3582 38.8546 42.3797 37.7937 41.716 37.1309L40.1833 35.5981C39.7104 35.1253 39.6179 34.3923 39.9582 33.8167C40.7856 32.4177 41.4106 30.9118 41.816 29.341C41.983 28.6941 42.5664 28.2423 43.2344 28.2423H45.3972C46.3197 28.2423 47.0704 27.4917 47.0704 26.5691V23.4311C47.0704 22.5085 46.3197 21.7579 45.3972 21.7579H43.2344C42.5663 21.7579 41.983 21.306 41.816 20.6592C41.4106 19.0884 40.7855 17.5825 39.9582 16.1835C39.6179 15.6079 39.7104 14.8749 40.1833 14.4021L41.7154 12.8699C42.3777 12.2084 42.3605 11.1479 41.716 10.5042L39.4968 8.28496C38.8535 7.64082 37.7926 7.62197 37.1311 8.28438L35.5984 9.81709C35.1256 10.29 34.3924 10.3826 33.8169 10.0422C32.4178 9.21475 30.9119 8.58965 29.3412 8.18428C28.6943 8.01738 28.2424 7.43398 28.2424 6.76592V4.60283C28.2424 3.68027 27.4917 2.92969 26.5691 2.92969H23.4312C22.5086 2.92969 21.7579 3.68027 21.7579 4.60283V6.76572C21.7579 7.43379 21.306 8.01719 20.6591 8.18408C19.0884 8.58945 17.5825 9.21455 16.1834 10.042C15.6076 10.3823 14.8747 10.2897 14.4019 9.81689L12.8698 8.28477C12.2093 7.62344 11.1484 7.63877 10.5042 8.28408L8.28477 10.5034C7.64199 11.1454 7.62051 12.2063 8.28418 12.8691L9.81689 14.4019C10.2897 14.8747 10.3823 15.6077 10.042 16.1833C9.21455 17.5823 8.58955 19.0882 8.18418 20.659C8.01719 21.3059 7.43379 21.7577 6.76582 21.7577H4.60293C3.68037 21.7578 2.92969 22.5084 2.92969 23.431V26.569C2.92969 27.4916 3.68037 28.2422 4.60293 28.2422H6.76572C7.43379 28.2422 8.01709 28.6941 8.18408 29.3409C8.58945 30.9117 9.21455 32.4176 10.0419 33.8166C10.3822 34.3922 10.2896 35.1252 9.8168 35.598L8.28467 37.1302C7.62236 37.7917 7.63965 38.8522 8.28408 39.4959L10.5033 41.7151C11.1466 42.3593 12.2075 42.3781 12.869 41.7157L14.4017 40.183C14.7501 39.8347 15.475 39.5391 16.1833 39.958Z"
          fill="white"/>
        <path
          d="M25 35.8789C19.0013 35.8789 14.1211 30.9986 14.1211 25C14.1211 19.0014 19.0013 14.1211 25 14.1211C30.9987 14.1211 35.8789 19.0014 35.8789 25C35.8789 30.9986 30.9987 35.8789 25 35.8789ZM25 17.0508C20.6167 17.0508 17.0508 20.6168 17.0508 25C17.0508 29.3832 20.6168 32.9492 25 32.9492C29.3832 32.9492 32.9492 29.3832 32.9492 25C32.9492 20.6168 29.3833 17.0508 25 17.0508Z"
          fill="white"/>
      </svg>
    )
  }

  const IconLogOut = ({className}) => {
    return (
      <svg className={className} width="50" height="50" viewBox="0 0 50 50" fill="none"
           xmlns="http://www.w3.org/2000/svg">
        <path
          d="M28.125 43.75H19.7917C19.2167 43.75 18.75 43.2834 18.75 42.7084C18.75 42.1334 19.2167 41.6667 19.7917 41.6667H28.125C29.8479 41.6667 31.25 40.2646 31.25 38.5417V28.125C31.25 27.55 31.7167 27.0833 32.2917 27.0833C32.8667 27.0833 33.3333 27.55 33.3333 28.125V38.5417C33.3333 41.4125 30.9979 43.75 28.125 43.75Z"
          fill="white"/>
        <path
          d="M48.9583 22.9167H28.125C27.55 22.9167 27.0833 22.45 27.0833 21.875C27.0833 21.3 27.55 20.8333 28.125 20.8333H48.9583C49.5333 20.8333 50 21.3 50 21.875C50 22.45 49.5333 22.9167 48.9583 22.9167Z"
          fill="white"/>
        <path
          d="M16.6667 50C16.2083 50 15.7604 49.9229 15.3375 49.7729L2.85833 45.6125C1.15 45.0437 0 43.4562 0 41.6667V4.16667C0 1.86875 1.86875 0 4.16667 0C4.62917 0 5.07917 0.0770833 5.49792 0.229167L17.975 4.3875C19.6833 4.95417 20.8333 6.54167 20.8333 8.33333V45.8333C20.8333 48.1312 18.9646 50 16.6667 50ZM4.16667 2.08333C3.01667 2.08333 2.08333 3.01875 2.08333 4.16667V41.6667C2.08333 42.5583 2.65833 43.35 3.51667 43.6375L16.0167 47.8042C17.3833 48.2896 18.75 47.1958 18.75 45.8333V8.33333C18.75 7.43958 18.175 6.64792 17.3167 6.36458L4.81667 2.19792C4.60208 2.12083 4.38333 2.08333 4.16667 2.08333Z"
          fill="white"/>
        <path
          d="M32.2917 16.6667C31.7167 16.6667 31.25 16.2 31.25 15.625V5.20833C31.25 3.48542 29.8479 2.08333 28.125 2.08333H4.16667C3.59167 2.08333 3.125 1.61667 3.125 1.04167C3.125 0.466667 3.59167 0 4.16667 0H28.125C30.9979 0 33.3333 2.3375 33.3333 5.20833V15.625C33.3333 16.2 32.8667 16.6667 32.2917 16.6667Z"
          fill="white"/>
        <path
          d="M40.625 31.25C40.3583 31.25 40.0916 31.1479 39.8875 30.9458C39.4812 30.5396 39.4812 29.8792 39.8875 29.4729L47.4833 21.8771L39.8875 14.2813C39.4812 13.875 39.4812 13.2146 39.8875 12.8083C40.2937 12.4021 40.9541 12.4021 41.3604 12.8083L49.6937 21.1417C50.1 21.5479 50.1 22.2083 49.6937 22.6146L41.3604 30.9479C41.1583 31.1479 40.8916 31.25 40.625 31.25Z"
          fill="white"/>
      </svg>
    )
  }

  const IconHome = ({width, height}) => {
    return (
      <svg className="text-light" width={width} height={height} viewBox={`0 0 15 15`} fill="none"
           xmlns="http://www.w3.org/2000/svg">
        <path
          d="M7.07926 0.222253C7.31275 -0.007434 7.6873 -0.007434 7.92079 0.222253L14.6708 6.86227C14.907 7.09465 14.9101 7.47453 14.6778 7.71076C14.4454 7.947 14.0655 7.95012 13.8293 7.71773L13 6.90201V12.5C13 12.7761 12.7762 13 12.5 13H2.50002C2.22388 13 2.00002 12.7761 2.00002 12.5V6.90201L1.17079 7.71773C0.934558 7.95012 0.554672 7.947 0.32229 7.71076C0.0899079 7.47453 0.0930283 7.09465 0.32926 6.86227L7.07926 0.222253ZM7.50002 1.49163L12 5.91831V12H10V8.49999C10 8.22385 9.77617 7.99999 9.50002 7.99999H6.50002C6.22388 7.99999 6.00002 8.22385 6.00002 8.49999V12H3.00002V5.91831L7.50002 1.49163ZM7.00002 12H9.00002V8.99999H7.00002V12Z"
          fill="currentColor" fillRule="evenodd" clipRule="evenodd"/>
      </svg>)
  }

  const IconCreatePost = ({width, height}) => {
    return (
      <svg className="text-light" width={width} height={height} viewBox="0 0 15 15" fill="none"
           xmlns="http://www.w3.org/2000/svg">
        <path
          d="M7.49991 0.876892C3.84222 0.876892 0.877075 3.84204 0.877075 7.49972C0.877075 11.1574 3.84222 14.1226 7.49991 14.1226C11.1576 14.1226 14.1227 11.1574 14.1227 7.49972C14.1227 3.84204 11.1576 0.876892 7.49991 0.876892ZM1.82707 7.49972C1.82707 4.36671 4.36689 1.82689 7.49991 1.82689C10.6329 1.82689 13.1727 4.36671 13.1727 7.49972C13.1727 10.6327 10.6329 13.1726 7.49991 13.1726C4.36689 13.1726 1.82707 10.6327 1.82707 7.49972ZM7.50003 4C7.77617 4 8.00003 4.22386 8.00003 4.5V7H10.5C10.7762 7 11 7.22386 11 7.5C11 7.77614 10.7762 8 10.5 8H8.00003V10.5C8.00003 10.7761 7.77617 11 7.50003 11C7.22389 11 7.00003 10.7761 7.00003 10.5V8H4.50003C4.22389 8 4.00003 7.77614 4.00003 7.5C4.00003 7.22386 4.22389 7 4.50003 7H7.00003V4.5C7.00003 4.22386 7.22389 4 7.50003 4Z"
          fill="currentColor" fillRule="evenodd" clipRule="evenodd"/>
      </svg>
    )
  }

  return menuState === "show" ? (
    <Menu
      menuState={menuState}
      handleStateMenu={handleStateMenu}>
      <div className='menu-link d-flex flex-column '>
        <div className='menu-item mx-auto'>
          <Link to="/" className={`nav-link ${currentPage === "" ? 'active-menu' : ""}`}><IconHome width={50}
                                                                                                   height={50}/>Home</Link>
        </div>
        <div className='menu-item mx-auto'>
          <Link to="/createpost"
                className={`nav-link ${currentPage === "createpost" ? 'active-menu' : ""}`}><IconCreatePost width={50}
                                                                                                            height={50}/>Create
            Post</Link>
        </div>
      </div>

      <div className='menu-additions d-flex flex-column'>
        <div className='menu-item mx-auto'>
          <Link to="/profile" className={`nav-link ${currentPage === "profile" ? 'active-menu' : ""}`}><IconProfile/>Profile</Link>
        </div>
        <div className='menu-item mx-auto'>
          <Link to="/settings"
                className={`nav-link mx-auto ${currentPage === "settings" ? 'active-menu' : ""}`}><IconSettings/>Settings</Link>
        </div>
        <div className='menu-item mx-auto'>
          <Link to="/" className='btn' onClick={handleSignOut}><IconLogOut/>Sign out</Link>
        </div>
      </div>
    </Menu>) : (
    <Menu
      menuState={menuState}
      handleStateMenu={handleStateMenu}>
      <div className='menu-items'>
        <div className='logo'>
          <img src="/short-logo.png" alt="short-logo"/>
        </div>
        <Link to="/">
          <div className={`home ${currentPage === "" ? 'short-active-menu' : "bg-secondary"}`}>
            <IconHome width={50} height={50}/>
          </div>
        </Link>
        <Link to="/createpost">
          <div className={`createpost ${currentPage === "createpost" ? 'short-active-menu' : "bg-secondary"}`}>
            <IconCreatePost width={50} height={50}/>
          </div>
        </Link>

        <Link to="/profile">
          <div className={`user ${currentPage === "profile" ? 'short-active-menu' : "bg-secondary"}`}>
            <IconProfile className='mx-2'/>
          </div>
        </Link>


        <Link to="/settings">
          <div className={`settings ${currentPage === "settings" ? 'short-active-menu' : "bg-secondary"}`}>
            <IconSettings className='mx-2'/>
          </div>
        </Link>


        <Link to="/">
          <div className={`logout bg-secondary`} onClick={handleSignOut}><IconLogOut className='mx-2'/></div>
        </Link>

      </div>
    </Menu>)

}

export default AuthMenu