import React, {useEffect} from 'react'
import Menu from "./menu";
import {Link} from "react-router-dom";
import {getItemFromLocalStore, setItemToLocalStore, setValueToStore} from "../../index";

const GuestMenu = ({currentPage, menuState}) => {
  useEffect(() => {
    menuState !== getItemFromLocalStore("stateMenu") && setValueToStore({
      type: "SET_MENU_STATE_REQUEST",
      menuState: getItemFromLocalStore("stateMenu")
    })
  }, [menuState])


  const handleStateMenu = (show) => {
    setItemToLocalStore("stateMenu", show)
    setValueToStore({type: "SET_MENU_STATE_REQUEST", menuState: show})
  }

  const IconLogIn = ({className}) => {
    return (
      <svg className={className} width="52" height="50" viewBox="0 0 52 50" fill="none"
           xmlns="http://www.w3.org/2000/svg">
        <g clipPath="url(#clip0)">
          <path
            d="M13.2644 46.0938H6.12223C5.26102 46.0938 4.74144 45.6284 4.50844 45.351C4.10617 44.8719 3.95033 44.2484 4.08116 43.6401C6.1761 33.8979 15.0566 26.7831 25.3084 26.5522C25.4792 26.5584 25.6504 26.5625 25.8226 26.5625C25.9963 26.5625 26.1689 26.5583 26.3412 26.5521C28.8481 26.6074 31.2968 27.0638 33.6276 27.9111C34.6706 28.2905 35.8337 27.7791 36.2253 26.7692C36.617 25.7595 36.089 24.6334 35.0459 24.2542C34.7119 24.1327 34.3756 24.019 34.0377 23.9112C37.3766 21.4864 39.5407 17.6239 39.5407 13.2812C39.5407 5.95801 33.3868 0 25.8226 0C18.2583 0 12.1044 5.95801 12.1044 13.2812C12.1044 17.6278 14.2723 21.4934 17.6162 23.9178C14.5527 24.8941 11.678 26.4125 9.16211 28.416C4.54919 32.0896 1.34187 37.2135 0.131145 42.844C-0.248322 44.6083 0.206191 46.4204 1.37818 47.8155C2.54422 49.2038 4.27341 50 6.12223 50H13.2644C14.3786 50 15.2818 49.1256 15.2818 48.0469C15.2818 46.9682 14.3786 46.0938 13.2644 46.0938ZM16.1392 13.2812C16.1392 8.11182 20.4831 3.90625 25.8226 3.90625C31.162 3.90625 35.5059 8.11182 35.5059 13.2812C35.5059 18.2976 31.4153 22.4061 26.294 22.645C26.137 22.6423 25.9799 22.6399 25.8226 22.6399C25.6648 22.6399 25.5072 22.6422 25.3496 22.6449C20.229 22.4053 16.1392 18.2971 16.1392 13.2812Z"
            fill="#FFF2E7"/>
          <path
            d="M50.1003 33.653C49.2367 31.7829 47.2916 30.5712 45.14 30.5664H38.8486C38.8441 30.5664 38.8398 30.5664 38.8352 30.5664C36.5656 30.5664 34.5856 31.8613 33.7888 33.8679C33.6828 34.1349 33.5532 34.4712 33.4179 34.8633H20.2096C19.6642 34.8633 19.1421 35.077 18.7621 35.4559L15.2967 38.9117C14.5334 39.6729 14.5373 40.8847 15.3053 41.6412L18.8357 45.1189C19.2149 45.4926 19.7334 45.703 20.2745 45.703H26.8309C27.9451 45.703 28.8483 44.8286 28.8483 43.7499C28.8483 42.6712 27.9451 41.7968 26.8309 41.7968H21.1203L19.5641 40.2638L21.0627 38.7695H34.9313C35.8607 38.7695 36.6697 38.1548 36.8907 37.2809C37.0539 36.6356 37.2587 36.0153 37.5549 35.2695C37.7501 34.7777 38.2406 34.4727 38.84 34.4727C38.8413 34.4727 38.8426 34.4727 38.844 34.4727H45.1352C45.7057 34.4739 46.1968 34.7708 46.4168 35.2473C46.9583 36.4203 47.605 38.2363 47.6098 40.2264C47.6147 42.2312 46.9687 44.0888 46.4257 45.2941C46.2069 45.7803 45.7117 46.0937 45.1588 46.0937C45.1577 46.0937 45.1566 46.0937 45.1555 46.0937H38.7882C38.2301 46.0925 37.7073 45.7448 37.4874 45.2287C37.2514 44.6749 37.047 44.0426 36.8623 43.2954C36.603 42.2464 35.514 41.5995 34.4309 41.8505C33.3472 42.1016 32.6791 43.1556 32.9384 44.2046C33.1725 45.1518 33.4405 45.9739 33.7576 46.7181C34.6048 48.7067 36.5757 49.9949 38.7835 49.9999H45.1509C45.1552 49.9999 45.1592 49.9999 45.1636 49.9999C47.3172 49.9998 49.2636 48.7665 50.1243 46.8553C50.8215 45.3073 51.6511 42.8991 51.6446 40.2171C51.6381 37.5424 50.8012 35.1712 50.1003 33.653Z"
            fill="#FFF2E7"/>
          <path
            d="M43.4743 42.1875C44.5885 42.1875 45.4917 41.3131 45.4917 40.2344C45.4917 39.1557 44.5885 38.2812 43.4743 38.2812C42.3602 38.2812 41.457 39.1557 41.457 40.2344C41.457 41.3131 42.3602 42.1875 43.4743 42.1875Z"
            fill="#FFF2E7"/>
        </g>
        <defs>
          <clipPath id="clip0">
            <rect width="51.6447" height="50" fill="white"/>
          </clipPath>
        </defs>
      </svg>
    )
  }

  const IconSignUp = ({className}) => {
    return (
      <svg className={className} width="50" height="50" viewBox="0 0 50 50" fill="none"
           xmlns="http://www.w3.org/2000/svg">
        <path
          d="M35.8958 25.0888C34.935 24.632 33.9546 24.2386 32.9571 23.909C36.1878 21.484 38.2816 17.6226 38.2816 13.2812C38.2816 5.95801 32.3237 0 25.0003 0C17.677 0 11.7191 5.95801 11.7191 13.2812C11.7191 17.6273 13.8175 21.4926 17.0543 23.9171C14.0887 24.8935 11.306 26.4127 8.87044 28.416C4.40443 32.0896 1.29925 37.2135 0.127086 42.844C-0.240296 44.6083 0.19984 46.4204 1.33441 47.8155C2.46341 49.2038 4.13753 50 5.92738 50H29.9808C31.0595 50 31.9339 49.1256 31.9339 48.0469C31.9339 46.9682 31.0595 46.0938 29.9808 46.0938H5.92738C5.09359 46.0938 4.59056 45.6283 4.36498 45.351C3.97542 44.872 3.82464 44.2484 3.9513 43.6401C5.97816 33.9043 14.5657 26.7924 24.4825 26.5525C24.6543 26.5592 24.8269 26.5625 25.0003 26.5625C25.1754 26.5625 25.3497 26.5591 25.5232 26.5523C28.5622 26.6236 31.4851 27.3172 34.2189 28.6168C35.1932 29.0797 36.3582 28.6655 36.8213 27.6912C37.2844 26.717 36.8701 25.5519 35.8958 25.0888ZM25.4767 22.6442C25.3182 22.6414 25.1594 22.6399 25.0003 22.6399C24.8427 22.6399 24.6851 22.6415 24.5277 22.6444C19.577 22.3975 15.6253 18.2922 15.6253 13.2812C15.6253 8.11182 19.8309 3.90625 25.0003 3.90625C30.1698 3.90625 34.3753 8.11182 34.3753 13.2812C34.3753 18.2909 30.4256 22.3954 25.4767 22.6442Z"
          fill="#FFF2E7"/>
        <path
          d="M48.0469 38.7695H42.6758V33.3984C42.6758 32.3197 41.8014 31.4453 40.7227 31.4453C39.6439 31.4453 38.7695 32.3197 38.7695 33.3984V38.7695H33.3984C32.3197 38.7695 31.4453 39.6439 31.4453 40.7227C31.4453 41.8014 32.3197 42.6758 33.3984 42.6758H38.7695V48.0469C38.7695 49.1256 39.6439 50 40.7227 50C41.8014 50 42.6758 49.1256 42.6758 48.0469V42.6758H48.0469C49.1256 42.6758 50 41.8014 50 40.7227C50 39.6439 49.1256 38.7695 48.0469 38.7695Z"
          fill="#FFF2E7"/>
      </svg>
    )
  }

  const IconHome = ({width, height}) => {
    return (
      <svg className="text-light" width={width} height={height} viewBox={`0 0 15 15`} fill="none"
           xmlns="http://www.w3.org/2000/svg">
        <path
          d="M7.07926 0.222253C7.31275 -0.007434 7.6873 -0.007434 7.92079 0.222253L14.6708 6.86227C14.907 7.09465 14.9101 7.47453 14.6778 7.71076C14.4454 7.947 14.0655 7.95012 13.8293 7.71773L13 6.90201V12.5C13 12.7761 12.7762 13 12.5 13H2.50002C2.22388 13 2.00002 12.7761 2.00002 12.5V6.90201L1.17079 7.71773C0.934558 7.95012 0.554672 7.947 0.32229 7.71076C0.0899079 7.47453 0.0930283 7.09465 0.32926 6.86227L7.07926 0.222253ZM7.50002 1.49163L12 5.91831V12H10V8.49999C10 8.22385 9.77617 7.99999 9.50002 7.99999H6.50002C6.22388 7.99999 6.00002 8.22385 6.00002 8.49999V12H3.00002V5.91831L7.50002 1.49163ZM7.00002 12H9.00002V8.99999H7.00002V12Z"
          fill="currentColor" fillRule="evenodd" clipRule="evenodd"/>
      </svg>)
  }

  const IconAuthors = ({width, height}) => {
    return (
      <svg xmlns="http://www.w3.org/2000/svg" enableBackground="new 0 0 24 24" viewBox="0 0 24 24" fill="white"
           width={width} height={height}>
        <rect fill="none" height="24" width="24"/>
        <g>
          <path
            d="M12,12.75c1.63,0,3.07,0.39,4.24,0.9c1.08,0.48,1.76,1.56,1.76,2.73L18,18H6l0-1.61c0-1.18,0.68-2.26,1.76-2.73 C8.93,13.14,10.37,12.75,12,12.75z M4,13c1.1,0,2-0.9,2-2c0-1.1-0.9-2-2-2s-2,0.9-2,2C2,12.1,2.9,13,4,13z M5.13,14.1 C4.76,14.04,4.39,14,4,14c-0.99,0-1.93,0.21-2.78,0.58C0.48,14.9,0,15.62,0,16.43V18l4.5,0v-1.61C4.5,15.56,4.73,14.78,5.13,14.1z M20,13c1.1,0,2-0.9,2-2c0-1.1-0.9-2-2-2s-2,0.9-2,2C18,12.1,18.9,13,20,13z M24,16.43c0-0.81-0.48-1.53-1.22-1.85 C21.93,14.21,20.99,14,20,14c-0.39,0-0.76,0.04-1.13,0.1c0.4,0.68,0.63,1.46,0.63,2.29V18l4.5,0V16.43z M12,6c1.66,0,3,1.34,3,3 c0,1.66-1.34,3-3,3s-3-1.34-3-3C9,7.34,10.34,6,12,6z"/>
        </g>
      </svg>
    )
  }

  return menuState === "show" ? (
    <Menu
      menuState={menuState}
      handleStateMenu={handleStateMenu}>
      <div className='menu-link d-flex flex-column '>
        <div className='menu-item mx-auto'>
          <Link to="/" className={`nav-link ${currentPage === "" ? 'active-menu' : ""}`}><IconHome width={50}
                                                                                                   height={50}/>Home</Link>
        </div>
        <div className='menu-item mx-auto'>
          <Link to="/authors" className={`nav-link ${currentPage === "authors" ? 'active-menu' : ""}`}><IconAuthors
            width={50} height={50}/>Authors</Link>
        </div>
      </div>

      <div className='menu-additions d-flex flex-column'>
        <div className='menu-item mx-auto'>
          <Link to="/login" className={`nav-link ${currentPage === "login" ? 'active-menu' : ""}`}><IconLogIn/> Log
            in</Link>
        </div>
        <div className='menu-item mx-auto'>
          <Link to="/signup" className={`nav-link ${currentPage === "signup" ? 'active-menu' : ""}`}><IconSignUp/> Sign
            up</Link>
        </div>
      </div>
    </Menu>) : (
    <Menu
      menuState={menuState}
      handleStateMenu={handleStateMenu}>
      <div className='menu-items'>
        <div className='logo'>
          <img src="/short-logo.png" alt="short-logo"/>
        </div>
        <Link to="/">
          <div className={`home ${currentPage === "" ? 'short-active-menu' : "bg-secondary"}`}>
            <IconHome width={50} height={50}/>
          </div>
        </Link>
        <Link to="/authors">
          <div className={`authors ${currentPage === "authors" ? 'short-active-menu' : "bg-secondary"}`}>
            <IconAuthors width={50} height={50}/>
          </div>
        </Link>
        <Link to="/login">
          <div className={`login ${currentPage === "login" ? 'short-active-menu' : "bg-secondary"}`}>
            <IconLogIn/>
          </div>
        </Link>
        <Link to="/signup">
          <div className={`signup ${currentPage === "signup" ? 'short-active-menu' : "bg-secondary"}`}>
            <IconSignUp/>
          </div>
        </Link>
      </div>
    </Menu>)
}

export default GuestMenu